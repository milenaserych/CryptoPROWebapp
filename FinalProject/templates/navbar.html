{% load static %}

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <!-- Container wrapper -->
  <div class="container">
    <!-- Navbar brand -->
    {% if request.user.is_authenticated %}
    <a class="navbar-brand me-2" href="{% url 'projects:projects' %}">
      <img
        src="{% static 'images/logo.svg'%}"
        height="30"
        alt="MDB Logo"
        loading="lazy"
        style="margin-top: -1px;"
      />
      CryptoPRO
    </a>
    {% else %}
      <span class="navbar-brand me-2">
          <img
              src="{% static 'images/logo.svg'%}"
              height="30"
              alt="MDB Logo"
              loading="lazy"
              style="margin-top: -1px; pointer-events: none; opacity: 0.5;"
          />
          CryptoPRO
      </span>
    {% endif %}


    <!-- Toggle button -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarButtonsExample"
      aria-controls="navbarButtonsExample"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarButtonsExample">
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        {% if request.user.is_authenticated %}
        {% if request.user.is_staff == False  %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'user-profile' %}">Profile</a>
        </li>
        {% endif %}
        {% if request.user.is_staff %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'profiles' %}">Users</a>
        </li>
        {% endif %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'projects:projects' %}">Modules</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'results:leaderboard' %}">Leaderboard</a>
        </li>
        {% if request.user.is_staff %}
          <!-- Display "Add Lesson" link only if the user is an admin -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'projects:create-project' %}">Add Module</a>
          </li>
        {% endif %}
        {% if request.user.is_staff %}
          <!-- Display "Add Lesson" link only if the user is an admin -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'projects:create-lesson' %}">Add Lesson</a>
          </li>
        {% endif %}
        {% if request.user.is_staff %}
          <!-- Display "Add Lesson" link only if the user is an admin -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'quizes:create-quiz' %}">Add Quiz</a>
          </li>
        {% endif %}
        {% if request.user.is_staff %}
          <!-- Display "Add Lesson" link only if the user is an admin -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'quizes:add-question' %}">Add Question</a>
          </li>
        {% endif %}
        {% endif %}
      </ul>
      <!-- Left links -->

      <div class="d-flex align-items-center">
        {% if request.user.is_authenticated %}
        <button type="button" class="btn btn-primary me-3">
          <a href="{% url 'logout' %}" class="custom-link">Logout</a>
        </button>
        {% else %}
        <button type="button" class="btn btn-primary me-3">
          <a href="{% url 'login' %}" class="custom-link">Login/Register</a>
        </button>
        {% endif %}
        
      </div>
    </div>
    <!-- Collapsible wrapper -->
  </div>
  <!-- Container wrapper -->
</nav>
<!-- Navbar -->

<style>
  .custom-link {
    color: white;
    text-decoration: none;
  }
</style>